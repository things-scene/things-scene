!function(e){var o={};function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=4)}([function(e,o){e.exports=scene},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,t,n){return t&&e(o.prototype,t),n&&e(o,n),o}}(),r=t(0);var s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"editor-table",label:"",name:"",property:{merge:!0,split:!0}},{type:"string",label:"data-key",name:"dataKey",property:"dataKey"},{type:"number",label:"data-index",name:"dataIndex",property:"dataIndex"}]};var i=function(e){function o(){return function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,(0,r.RectPath)(r.Component)),n(o,[{key:"_drawBorder",value:function(e,o,t,n,s,i){i&&i.strokeStyle&&i.lineWidth&&i.lineDash&&(e.beginPath(),e.moveTo(o,t),e.lineTo(n,s),r.Component.drawStroke(e,i))}},{key:"_draw",value:function(e){var o=this.model,t=o.left,n=o.top,r=o.width,s=o.height,i=this.model.border||{};e.beginPath(),e.lineWidth=0,e.rect(t,n,r,s),this.drawFill(e);var c=this.parent,u=c.components.indexOf(this),l=c.columns||1,a=c.rows||1;this._drawBorder(e,t,n,t+r,n,i.top),this._drawBorder(e,t,n+s,t,n,i.left),function(e,o,t){return(e+1)%t==0}(u,0,l)&&this._drawBorder(e,t+r,n,t+r,n+s,i.right),function(e,o,t){return e>=(o-1)*t}(u,a,l)&&this._drawBorder(e,t+r,n+s,t,n+s,i.bottom)}},{key:"nature",get:function(){return s}},{key:"merged",set:function(e){this.set("merged",!!e),e&&this.set("text","")},get:function(){return this.get("merged")}},{key:"rowspan",set:function(e){this.set("rowspan",e)},get:function(){return this.get("rowspan")}},{key:"colspan",set:function(e){this.set("colspan",e)},get:function(){return this.get("colspan")}},{key:"border",get:function(){this.model.border}}]),o}();o.default=i,["border"].forEach(function(e){return r.Component.memoize(i.prototype,e,!1)}),r.Component.register("table-cell",i)},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n,r=function(){function e(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,t,n){return t&&e(o.prototype,t),n&&e(o,n),o}}(),s=t(1),i=((n=s)&&n.__esModule,t(0));var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"rows",name:"rows",property:"rows"},{type:"number",label:"columns",name:"columns",property:"columns"}]},u={all:["top","left","bottom","right"],out:["top","left","bottom","right"],left:["left"],right:["right"],top:["top"],bottom:["bottom"],leftright:["left","right"],topbottom:["top","bottom"]},l={strokeStyle:"",lineDash:"solid",lineWidth:0},a={strokeStyle:"#999",lineDash:"solid",lineWidth:1},h=i.Layout.get("table");function p(e){for(var o=arguments.length,t=Array(o>1?o-1:0),n=1;n<o;n++)t[n-1]=arguments[n];for(var r in t)if(e.hasOwnProperty(t[r]))return!0}function f(e){return i.Model.compile({type:"table-cell",strokeStyle:"blue",left:0,top:0,width:1,height:1,textWrap:!0,border:g(a,"all")},e)}function m(e,o){var t=JSON.parse(JSON.stringify(e));return delete t.text,i.Model.compile(t,o)}function g(e,o){return(u[o]||[]).reduce(function(o,t){return o[t]=e,o},{})}function d(e,o,t){e&&e.set("border",Object.assign({},e.get("border")||{},g(o,t)))}function w(e,o,t,n){return 0==n||!(n%o)||-1==t.indexOf(n-1)}function v(e,o,t,n){return n==e-1||n%o==o-1||-1==t.indexOf(n+1)}function y(e,o,t,n){return n<o||-1==t.indexOf(n-o)}function C(e,o,t,n){return n>e-o-1||-1==t.indexOf(n+o)}function b(e,o){return o-e}function x(e,o){return o+e}function O(e,o){return o%e?o-1:-1}function k(e,o){return(o+1)%e?o+1:-1}function E(e,o){for(var t=[],n=0;n<o;n++)t.push(1);return t}var R={ondragmove:function(e,o,t){var n=t.textBounds,r=n.left,s=(n.top,n.width),i=(n.height,t.widths_sum),c=t.widths.slice(),u=r+c.slice(0,o+1).reduce(function(e,o){return e+o},0)/i*s,l=(t.transcoordP2S(e.x,e.y).x-u)/s*i,a=i/s*10;l=l<0?-Math.min(c[o]-a,-l):Math.min(c[o+1]-a,l),c[o]=Math.round(100*(c[o]+l))/100,c[o+1]=Math.round(100*(c[o+1]-l))/100,t.set("widths",c)}},_={ondragmove:function(e,o,t){var n=t.textBounds,r=(n.left,n.top),s=(n.width,n.height),i=t.heights_sum,c=t.heights.slice();o-=t.columns-1;var u=r+c.slice(0,o+1).reduce(function(e,o){return e+o},0)/i*s,l=(t.transcoordP2S(e.x,e.y).y-u)/s*i,a=i/s*10;l=l<0?-Math.min(c[o]-a,-l):Math.min(c[o+1]-a,l),c[o]=Math.round(100*(c[o]+l))/100,c[o+1]=Math.round(100*(c[o+1]-l))/100,t.set("heights",c)}},M=function(e){function o(){return function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(o,i.Container),r(o,[{key:"created",value:function(){var e=this.rows*this.columns,o=this.size()-e;if(0!=o){if(o>0){var t=this._components.slice(o);this.remove(t)}else{for(var n=[],r=0;r<-o;r++)n.push(f(this.app));this.add(n)}var s=this.get("widths"),i=this.get("heights");(!s||s.length<this.columns)&&this.set("widths",this.widths),(!i||i.length<this.rows)&&this.set("heights",this.heights)}}},{key:"buildCells",value:function(e,o,t,n){var r=this;if(e<t){var s=this._components.slice(n*e),i=[];if(s.forEach(function(e){(!0===e.merged||e.rowspan>1||e.colspan>1)&&i.push(e)}),i.length>0){var c=[],u=[];i.forEach(function(e){var o,t,s=void 0;for(o=r.components.indexOf(e)%n,s=(t=Math.floor(r.components.indexOf(e)/n))*n+o+1;s;){--s;var i=r.components[s];if(i.rowspan>1||i.colspan>1){var l=r.components.indexOf(i)%n,a=r.components.indexOf(i)%n+i.colspan,h=Math.floor(r.components.indexOf(i)/n),p=Math.floor(r.components.indexOf(i)/n)+i.rowspan;o>=l&&o<a&&t>=h&&t<p&&-1==u.indexOf(s)&&(u.push(s),c.push(i))}}}),c.forEach(function(o){o.rowspan-=t-e})}this.remove(s)}var l=Math.min(e,t);if(o>n)for(var a=0;a<l;a++)for(var h=n;h<o;h++)this.insertComponentAt(f(this.app),a*o+h);else if(o<n){for(var p=[],m=0;m<l;m++)for(var g=o;g<n;g++)p.push(this.components[m*n+g]);var d=[];if(p.forEach(function(e){(!0===e.merged||e.rowspan>1||e.colspan>1)&&d.push(e)}),d.length>0){var w=[],v=[];d.forEach(function(e){var o,t,s=void 0;for(o=r.components.indexOf(e)%n,s=(t=Math.floor(r.components.indexOf(e)/n))*n+o+1;s;){--s;var i=r.components[s];if(i.rowspan>1||i.colspan>1){var c=r.components.indexOf(i)%n,u=r.components.indexOf(i)%n+i.colspan,l=Math.floor(r.components.indexOf(i)/n),a=Math.floor(r.components.indexOf(i)/n)+i.rowspan;o>=c&&o<u&&t>=l&&t<a&&-1==v.indexOf(s)&&(v.push(s),w.push(i))}}}),w.forEach(function(e){e.colspan-=n-o})}this.remove(p)}if(e>t){for(var y=[],C=t;C<e;C++)for(var b=0;b<o;b++)y.push(f(this.app));this.add(y)}this.set({widths:this.widths,heights:this.heights})}},{key:"setCellsStyle",value:function(e,o,t){var n=this,r=this.components,s=r.length,i=this.get("columns"),c=[];e.forEach(function(e){if(c.push(e),e.colspan||e.rowspan)for(var o=n.getRowColumn(e).column,t=n.getRowColumn(e).row,r=t;r<t+e.rowspan;r++)for(var s=o;s<o+e.colspan;s++)r==t&&s==o||c.push(n.components[r*n.columns+s])});var u=c.map(function(e){return r.indexOf(e)});u.forEach(function(e){var n=r[e];switch(t){case"all":d(n,o,t),w(0,i,u,e)&&d(r[O(i,e)],o,"right"),v(s,i,u,e)&&d(r[k(i,e)],o,"left"),y(0,i,u,e)&&d(r[b(i,e)],o,"bottom"),C(s,i,u,e)&&d(r[x(i,e)],o,"top");break;case"in":w(0,i,u,e)||d(n,o,"left"),v(s,i,u,e)||d(n,o,"right"),y(0,i,u,e)||d(n,o,"top"),C(s,i,u,e)||d(n,o,"bottom");break;case"out":w(0,i,u,e)&&(d(n,o,"left"),d(r[O(i,e)],o,"right")),v(s,i,u,e)&&(d(n,o,"right"),d(r[k(i,e)],o,"left")),y(0,i,u,e)&&(d(n,o,"top"),d(r[b(i,e)],o,"bottom")),C(s,i,u,e)&&(d(n,o,"bottom"),d(r[x(i,e)],o,"top"));break;case"left":w(0,i,u,e)&&(d(n,o,"left"),d(r[O(i,e)],o,"right"));break;case"right":v(s,i,u,e)&&(d(n,o,"right"),d(r[k(i,e)],o,"left"));break;case"center":w(0,i,u,e)||d(n,o,"left"),v(s,i,u,e)||d(n,o,"right");break;case"middle":y(0,i,u,e)||d(n,o,"top"),C(s,i,u,e)||d(n,o,"bottom");break;case"top":y(0,i,u,e)&&(d(n,o,"top"),d(r[b(i,e)],o,"bottom"));break;case"bottom":C(s,i,u,e)&&(d(n,o,"bottom"),d(r[x(i,e)],o,"top"));break;case"clear":d(n,l,"all"),w(0,i,u,e)&&d(r[O(i,e)],l,"right"),v(s,i,u,e)&&d(r[k(i,e)],l,"left"),y(0,i,u,e)&&d(r[b(i,e)],l,"bottom"),C(s,i,u,e)&&d(r[x(i,e)],l,"top")}})}},{key:"setCellsData",value:function(){var e=this.data;if(e){e=this.toObjectArrayValue(e)||[];var o=this.components;this.get("columns");o.forEach(function(o){var t=o.model.dataKey,n=o.model.dataIndex;t&&n>=0&&(o.value=(e[n]||{})[t])})}}},{key:"getRowColumn",value:function(e){var o=this.components.indexOf(e);this.components.length;return{column:o%this.columns,row:Math.floor(o/this.columns)}}},{key:"getCellsByRow",value:function(e){return this.components.slice(e*this.columns,(e+1)*this.columns)}},{key:"getCellsByColumn",value:function(e){for(var o=[],t=0;t<this.rows;t++)o.push(this.components[this.columns*t+e]);return o}},{key:"findMergedCellByX",value:function(e){for(var o=[],t=void 0,n=0;n<this.columns;n++)(!0===(t=this.components[e*this.columns+n]).merged||t.rowspan>1||t.colspan>1)&&o.push(t);return o}},{key:"findMergedCellByY",value:function(e){for(var o=[],t=void 0,n=0;n<this.rows;n++)(!0===(t=this.components[n*this.columns+e]).merged||t.rowspan>1||t.colspan>1)&&o.push(t);return o}},{key:"mergeCells",value:function(e){var o=this,t=[];if(e.forEach(function(e){var n=o.getRowColumn(e).row;-1==t.indexOf(n)&&t.push(n)}),t.length-1!=t[t.length-1]-t[0])return!1;var n=[];if(e.forEach(function(e){var t=o.getRowColumn(e).column;-1==n.indexOf(t)&&n.push(t)}),n.length-1!=n[n.length-1]-n[0])return!1;var r=t.length,s=n.length,i=e.length;if(i!==r*s||i<2)return!1;e.sort(function(e,t){return o.getRowColumn(e).row*o.columns+o.getRowColumn(e).column-(o.getRowColumn(t).row*o.columns+o.getRowColumn(t).column)});var c=e[0];c.set({colspan:s,rowspan:r});for(var u=1;u<i;u++)e[u].merged=!0;this.root.selected=[c]}},{key:"splitCells",value:function(e){this.getRowColumn(e[0]);for(var o=e[0],t=this.components.indexOf(e[0]),n=this.components.length,r=this.components[n-1],s=n/(this.getRowColumn(r).row+1),i=0;i<o.rowspan;i++)for(var c=void 0,u=t;u<t+o.colspan;u++)c=s*i+u,this.components[c].merged=!1;o.colspan=1,o.rowspan=1}},{key:"deleteRows",value:function(e){var o=this;if(1==e[0].merged)return!1;var t=[];e.forEach(function(e){var n=o.getRowColumn(e).row;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse();var n=this.heights.slice();t.forEach(function(e){var t=o.findMergedCellByX(e);if(0===t.length)o.remove(o.getCellsByRow(e));else{var n=[],r=[];t.forEach(function(e){var t,s,i=void 0;for(t=o.getRowColumn(e).column,i=(s=o.getRowColumn(e).row)*o.columns+t+1;i;){--i;var c=o.components[i];if(c.rowspan>1||c.colspan>1){var u=o.getRowColumn(c).column,l=o.getRowColumn(c).column+c.colspan,a=o.getRowColumn(c).row,h=o.getRowColumn(c).row+c.rowspan;t>=u&&t<l&&s>=a&&s<h&&-1==r.indexOf(i)&&(r.push(i),n.push(c))}}}),r.forEach(function(t){var n=Math.floor(t/o.columns);e===n&&n!==o.rows-1&&o.components[t].rowspan>1?(o.components[t+o.columns].rowspan=o.components[t].rowspan-1,o.components[t+o.columns].colspan=o.components[t].colspan,o.components[t+o.columns].merged=!1,o.components[t+o.columns].set("text",o.components[t].get("text"))):o.components[t].rowspan-=1}),o.remove(o.getCellsByRow(e))}}),n.splice(t,1),this.model.rows-=t.length,this.set("heights",n)}},{key:"deleteColumns",value:function(e){var o=this;if(1==e[0].merged)return!1;var t=[];e.forEach(function(e){var n=o.getRowColumn(e).column;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse(),t.forEach(function(e){var t=o.widths.slice(),n=o.findMergedCellByY(e);if(0===n.length)o.remove(o.getCellsByColumn(e));else{var r=[],s=[];n.forEach(function(e){var t,n,i=void 0;for(t=o.getRowColumn(e).column,i=(n=o.getRowColumn(e).row)*o.columns+t+1;i;){--i;var c=o.components[i];if(c.rowspan>1||c.colspan>1){var u=o.getRowColumn(c).column,l=o.getRowColumn(c).column+c.colspan,a=o.getRowColumn(c).row,h=o.getRowColumn(c).row+c.rowspan;t>=u&&t<l&&n>=a&&n<h&&-1==s.indexOf(i)&&(s.push(i),r.push(c))}}}),s.forEach(function(t){var n=t%o.columns;e===n&&n!==o.columns-1&&o.components[t].colspan>1?(o.components[t+1].rowspan=o.components[t].rowspan,o.components[t+1].colspan=o.components[t].colspan-1,o.components[t+1].merged=!1,o.components[t+1].set("text",o.components[t].get("text"))):o.components[t].colspan-=1}),o.remove(o.getCellsByColumn(e))}t.splice(e,1),o.model.columns-=1,o.set("widths",t)})}},{key:"insertCellsAbove",value:function(e){var o=this,t=[];if(e.forEach(function(e){var n=o.getRowColumn(e).row;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse(),t.length>=2)return!1;var n=t[0],r=[],s=[];t.forEach(function(e){var i=o.findMergedCellByX(e);if(0===i.length){for(var c=0;c<o.columns;c++)s.push(m(o.components[e*o.columns+c].model,o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)});var u=o.heights.slice();u.splice.apply(u,[n,0].concat(r)),o.set("heights",u),o.model.rows+=t.length,o.clearCache()}else{if(t.length>1)return!1;var l=[],a=[];i.forEach(function(e){var t,n,r=void 0;for(t=o.getRowColumn(e).column,r=(n=o.getRowColumn(e).row)*o.columns+t+1;r;){--r;var s=o.components[r];if(s.rowspan>1||s.colspan>1){var i=o.getRowColumn(s).column,c=o.getRowColumn(s).column+s.colspan,u=o.getRowColumn(s).row,h=o.getRowColumn(s).row+s.rowspan;t>=i&&t<c&&n>=u&&n<h&&-1==a.indexOf(r)&&(a.push(r),l.push(s))}}}),a.forEach(function(i){if(a.length>=2)return!1;var c=Math.floor(i/o.columns),u={rowspan:o.components[i].rowspan,colspan:o.components[i].colspan,text:o.components[i].get("text"),merged:o.components[i].merged};if(c===e){for(var l=0;l<o.columns;l++)s.push(f(o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)}),o.components[i+o.columns].rowspan=u.rowspan,o.components[i+o.columns].colspan=u.colspan,o.components[i+o.columns].set("text",u.text),o.components[i+o.columns].merged=u.merged}else{for(var h=0;h<o.columns;h++)s.push(m(o.components[e*o.columns+h].model,o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)}),o.components[i].rowspan+=1}var p=o.heights.slice();p.splice.apply(p,[n,0].concat(r)),o.set("heights",p),o.model.rows+=t.length,o.clearCache()})}})}},{key:"insertCellsBelow",value:function(e){var o=this,t=[];if(e.forEach(function(e){var n=o.getRowColumn(e).row;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse(),t.length>=2)return!1;var n=t[t.length-1]+1,r=[],s=[];t.forEach(function(e){var t=o.findMergedCellByX(e);if(0===t.length){for(var i=0;i<o.columns;i++)s.push(m(o.components[e*o.columns+i].model,o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)});var c=o.heights.slice();c.splice.apply(c,[n,0].concat(r)),o.set("heights",c),o.model.rows+=1,o.clearCache()}else{var u=[],l=[];t.forEach(function(e){var t,n,r=void 0;for(t=o.getRowColumn(e).column,r=(n=o.getRowColumn(e).row)*o.columns+t+1;r;){--r;var s=o.components[r];if(s.rowspan>1||s.colspan>1){var i=o.getRowColumn(s).column,c=o.getRowColumn(s).column+s.colspan,a=o.getRowColumn(s).row,h=o.getRowColumn(s).row+s.rowspan;t>=i&&t<c&&n>=a&&n<h&&-1==l.indexOf(r)&&(l.push(r),u.push(s))}}}),l.forEach(function(t){if(l.length>=2)return!1;var i=Math.floor(t/o.columns),c=o.components[t].rowspan;o.components[t].colspan,o.components[t].get("text"),o.components[t].merged;if(i+c-1===e){for(var u=0;u<o.columns;u++)s.push(f(o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)})}else if(i===e){for(var a=0;a<o.columns;a++)s.push(m(o.components[e*o.columns+a].model,o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)}),o.components[t].rowspan+=1,o.components[t+o.columns].rowspan=1,o.components[t+o.columns].colspan=1,o.components[t+o.columns].merged=!0,o.components[t+o.columns].set("text","")}else{for(var h=0;h<o.columns;h++)s.push(m(o.components[e*o.columns+h].model,o.app));r.push(o.heights[e]),s.reverse().forEach(function(e){o.insertComponentAt(e,n*o.columns)}),o.components[t].rowspan+=1}var p=o.heights.slice();p.splice.apply(p,[n,0].concat(r)),o.set("heights",p),o.model.rows+=1,o.clearCache()})}})}},{key:"insertCellsLeft",value:function(e){var o=this,t=[];if(e.forEach(function(e){var n=o.getRowColumn(e).column;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse(),t.length>=2)return!1;var n=t[0],r=[],s=[];t.forEach(function(e){var i=o.findMergedCellByY(e);if(0===i.length){for(var c=0;c<o.rows;c++)s.push(m(o.components[e+o.columns*c].model,o.app));r.push(o.widths[e]);var u=o.columns,l=o.rows;s.reverse().forEach(function(e){0==l&&(l=o.rows,u++),l--,o.insertComponentAt(e,n+l*u)});var a=o.widths.slice();o.model.columns+=t.length,a.splice.apply(a,[n,0].concat(r)),o.set("widths",a)}else{var h=[],p=[];i.forEach(function(e){var t,n,r=void 0;for(t=o.getRowColumn(e).column,r=(n=o.getRowColumn(e).row)*o.columns+t+1;r;){--r;var s=o.components[r];if(s.rowspan>1||s.colspan>1){var i=o.getRowColumn(s).column,c=o.getRowColumn(s).column+s.colspan,u=o.getRowColumn(s).row,l=o.getRowColumn(s).row+s.rowspan;t>=i&&t<c&&n>=u&&n<l&&-1==p.indexOf(r)&&(p.push(r),h.push(s))}}}),p.forEach(function(i){if(p.length>=2)return!1;var c=i%o.columns;o.components[i].rowspan,o.components[i].colspan,o.components[i].get("text"),o.components[i].merged;if(c===e){for(var u=0;u<o.rows;u++)s.push(f(o.app));r.push(o.widths[e]);var l=o.columns,a=o.rows;s.reverse().forEach(function(e){0==a&&(a=o.rows,l++),a--,o.insertComponentAt(e,n+a*l)})}else{o.components[i].colspan+=1;for(var h=0;h<o.rows;h++)s.push(m(o.components[e+o.columns*h].model,o.app));r.push(o.widths[e]);var g=o.columns,d=o.rows;s.reverse().forEach(function(e){0==d&&(d=o.rows,g++),d--,o.insertComponentAt(e,n+d*g)})}var w=o.widths.slice();o.model.columns+=t.length,w.splice.apply(w,[n,0].concat(r)),o.set("widths",w)})}})}},{key:"insertCellsRight",value:function(e){var o=this,t=[];if(e.forEach(function(e){var n=o.getRowColumn(e).column;-1==t.indexOf(n)&&t.push(n)}),t.sort(function(e,o){return e-o}),t.reverse(),t.length>=2)return!1;var n=t[t.length-1]+1,r=[],s=[];t.forEach(function(e){var i=o.findMergedCellByY(e);if(0===i.length){for(var c=0;c<o.rows;c++)s.push(m(o.components[e+o.columns*c].model,o.app));r.push(o.widths[e]);var u=o.columns,l=o.rows;s.reverse().forEach(function(e){0==l&&(l=o.rows,u++),l--,o.insertComponentAt(e,n+l*u)});var a=o.widths.slice();o.model.columns+=t.length,a.splice.apply(a,[n,0].concat(r)),o.set("widths",a)}else{var h=[],p=[];i.forEach(function(e){var t,n,r=void 0;for(t=o.getRowColumn(e).column,r=(n=o.getRowColumn(e).row)*o.columns+t+1;r;){--r;var s=o.components[r];if(s.rowspan>1||s.colspan>1){var i=o.getRowColumn(s).column,c=o.getRowColumn(s).column+s.colspan,u=o.getRowColumn(s).row,l=o.getRowColumn(s).row+s.rowspan;t>=i&&t<c&&n>=u&&n<l&&-1==p.indexOf(r)&&(p.push(r),h.push(s))}}}),p.forEach(function(i){if(p.length>=2)return!1;var c=Math.floor(i/o.columns),u=i%o.columns,l=(o.components[i].rowspan,o.components[i].colspan);o.components[i].get("text"),o.components[i].merged;if(u+l-1===e){for(var a=0;a<o.rows;a++)s.push(f(o.app));r.push(o.widths[e]);var h=o.columns,g=o.rows;s.reverse().forEach(function(e){0==g&&(g=o.rows,h++),g--,o.insertComponentAt(e,n+g*h)})}else if(u===e){o.components[i].colspan+=1;for(var d=0;d<o.rows;d++)s.push(m(o.components[e+o.columns*d].model,o.app));r.push(o.widths[e]);var w=o.columns,v=o.rows;s.reverse().forEach(function(e){0==v&&(v=o.rows,w++),v--,o.insertComponentAt(e,n+v*w)}),o.components[i+c+1].rowspan=1,o.components[i+c+1].colspan=1,o.components[i+c+1].merged=!0,o.components[i+c+1].set("text","")}else{o.components[i].colspan+=1;for(var y=0;y<o.rows;y++)s.push(m(o.components[e+o.columns*y].model,o.app));r.push(o.widths[e]);var C=o.columns,b=o.rows;s.reverse().forEach(function(e){0==b&&(b=o.rows,C++),b--,o.insertComponentAt(e,n+b*C)})}var x=o.widths.slice();o.model.columns+=t.length,x.splice.apply(x,[n,0].concat(r)),o.set("widths",x)})}})}},{key:"distributeHorizontal",value:function(e){var o=this,t=[];e.forEach(function(e){var n=o.getRowColumn(e);-1==t.indexOf(n.column)&&t.push(n.column)});var n=t.reduce(function(e,t){return e+o.widths[t]},0),r=Math.round(n/t.length*100)/100,s=this.widths.slice();t.forEach(function(e){s[e]=r}),this.set("widths",s)}},{key:"distributeVertical",value:function(e){var o=this,t=[];e.forEach(function(e){var n=o.getRowColumn(e);-1==t.indexOf(n.row)&&t.push(n.row)});var n=t.reduce(function(e,t){return e+o.heights[t]},0),r=Math.round(n/t.length*100)/100,s=this.heights.slice();t.forEach(function(e){s[e]=r}),this.set("heights",s)}},{key:"toObjectArrayValue",value:function(e){if(!e||0===e.length)return null;if(!e[0].hasOwnProperty("__field1"))return e;var o={},t=[];for(var n in e[0])o[n]=e[0][n];for(var r=1;r<e.length;r++){var s={},i=e[r];for(var c in o){var u=o[c],l=i[c];s[u]=l}t.push(s)}return t}},{key:"onchange",value:function(e,o){p(e,"rows","columns")&&this.buildCells(this.get("rows"),this.get("columns"),o.hasOwnProperty("rows")?o.rows:this.get("rows"),o.hasOwnProperty("columns")?o.columns:this.get("columns")),(o.data||e.data)&&this.setCellsData()}},{key:"oncellchanged",value:function(e,o){p(e,"dataKey","dataIndex")&&this.setCellsData()}},{key:"focusible",get:function(){return!1}},{key:"widths",get:function(){var e=this.get("widths");return e?e.length<this.columns?e.concat(E(0,this.columns-e.length)):e.length>this.columns?e.slice(0,this.columns):e:E(0,this.columns)}},{key:"heights",get:function(){var e=this.get("heights");return e?e.length<this.rows?e.concat(E(0,this.rows-e.length)):e.length>this.rows?e.slice(0,this.rows):e:E(0,this.rows)}},{key:"layout",get:function(){return h}},{key:"rows",get:function(){return this.get("rows")}},{key:"columns",get:function(){return this.get("columns")}},{key:"lefts",get:function(){var e=this;return this.components.filter(function(o,t){return!(t%e.columns)})}},{key:"centers",get:function(){var e=this;return this.components.filter(function(o,t){return t%e.columns&&(t+1)%e.columns})}},{key:"rights",get:function(){var e=this;return this.components.filter(function(o,t){return!((t+1)%e.columns)})}},{key:"tops",get:function(){return this.components.slice(0,this.columns)}},{key:"middles",get:function(){return this.components.slice(this.columns,this.columns*(this.rows-1))}},{key:"bottoms",get:function(){return this.components.slice(this.columns*(this.rows-1))}},{key:"all",get:function(){return this.components}},{key:"widths_sum",get:function(){var e=this,o=this.widths;return o?o.filter(function(o,t){return t<e.columns}).reduce(function(e,o){return e+o},0):this.columns}},{key:"heights_sum",get:function(){var e=this,o=this.heights;return o?o.filter(function(o,t){return t<e.rows}).reduce(function(e,o){return e+o},0):this.rows}},{key:"nature",get:function(){return c}},{key:"controls",get:function(){var e=this.widths,o=this.heights,t=this.textBounds,n=t.width/this.widths_sum,r=t.height/this.heights_sum,s=t.left,i=t.top,c=[];return e.slice(0,this.columns-1).forEach(function(e){s+=e*n,c.push({x:s,y:t.top,handler:R})}),o.slice(0,this.rows-1).forEach(function(e){i+=e*r,c.push({x:t.left,y:i,handler:_})}),c}},{key:"eventMap",get:function(){return{"(self)":{"(descendant)":{change:this.oncellchanged}}}}}]),o}();o.default=M,["rows","columns","widths","heights","widths_sum","heights_sum","controls"].forEach(function(e){return i.Component.memoize(M.prototype,e,!1)}),i.Component.register("table",M)},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(2);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return(e=n,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,o,t){e.exports=t(3)}]);
//# sourceMappingURL=things-scene-table.js.map